#? stdtmpl | standard
#proc generate_search_box(value=""): string =
#  result = ""
<form action="/search" method="GET" role="search" id="searchbox">
  <input id="search" name="query" placeholder="Search Nimble packages" type="search" value="$value" minlength="1" autofocus required >
</form>
#end
#
#proc generate_home_page(most_queried_packages, new_packages: seq[Pkg], github_trending: seq[JsonNode]): string =
#  result = ""
<div class="upper">
    <div class="container">
    <div id="welcome" class="twelve column">
      <h5> Welcome to Nimble Directory</h5>
    <p class="w-message"><span>Developer?</span> Search for packages or jump directly to a package page.
    Nim Package Directory generates and hosts documentation for packages.</p>
    <p class="w-message"><span>Package maintainer?</span> <a href="/about.html">Learn</a> what this service can do for you.</p>
    </div>
    </div>
</div>

<header class="hero">
    ${generate_search_box()}
</header>

  <div class="container showcase">
    <div class="col pkg-cat">
    <h3> Trending Packages</h3>

    <div class="twelve columns">
      # for i in 0 .. min(8, len(github_trending))-1:
      # let pkg = github_trending[i]
      <div id="showcase" class="four columns">
        <h4><a href="/pkg/${pkg["name"].str}/">${pkg["name"].str}</a><span class="stargazer"><i class="fas fa-star" style="color:#f7e942"></i> ${pkg["stargazers_count"].getNum}</span></h4>
        <p class="show-text"><img src="${pkg["owner"]["avatar_url"].str}""><span class="author"><a href="${pkg["owner"]["html_url"].str}">${pkg["owner"]["login"].str}</a></span></p>
        <p class="last-commit">${pkg["update_age"].str}</p>
        <a href="/pkg/${pkg["name"].str}/"><button class="visit-pack-btn"><i class="fas fa-link"> </i> Visit</button></a>
      </div>
      # end
    </div>

    <div class="col pkg-cat">
    <h3> Newest Packages</h3>

    <div class="twelve columns">
      # for p in new_packages:
       <div id="showcase" class="four columns">
        <h4><a href="/pkg/${p["name"].str}/">${p["name"].str}</a></h4>
          <p class="pkg-desc">${p["description"].str}</p>
            # if p.hasKey("web"):
            <a href="${p["web"].str}"><button class="visit-pack-btn"><i class="fas fa-link"> </i> Visit</button></a>
            # end
       </div>
      # end
    </div>
    </div>

    <div class="col pkg-cat">
    <h3> Most queried</h3>

    <div class="twelve columns">
      # for p in most_queried_packages:
      <div id="showcase" class="four columns">
        <h4><a href="/pkg/${p["name"].str}">${p["name"].str}</a></h4>
          <p class="pkg-desc">${p["description"].str}</p>
            # if p.hasKey("web"):
            <a href="${p["web"].str}"><button class="visit-pack-btn"><i class="fas fa-link"> </i> Visit</button></a>
            #end
      </div>
      #end
    </div>
    </div>
  </div>




        